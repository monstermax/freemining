 
Miner ${miner} - install

<hr />

<form id="form-install" method="post">
    <input type="hidden" id="action" name="action" value="" />

    ${(() => {
        let html = '';

        if (minerStatus) {
            html += 'Miner is <span class="badge bg-warning">running</span>...';

        } else {
            html += 'Miner is <span class="badge bg-success">not running</span>';
        }

        return html;
    })()}

    <br />

    ${(() => {
        let html = '';

        if (installStatus) {
            html += 'Installation in progress...';
            html += '&nbsp;&nbsp;&nbsp;&nbsp;';
            html += '&nbsp;&nbsp;&nbsp;&nbsp;';
            html += ' <a class="btn btn-danger btn-sm" onclick="stopInstall()" href="javascript:void(0)">Stop install</a>';
            html += ' <a class="btn btn-primary btn-sm" href="?miner=${miner}&action=log">Show logs</a>';

        } else {
            html += 'No running installation.';
            html += '&nbsp;&nbsp;&nbsp;&nbsp;';

            if (! minerStatus && ! uninstallStatus) {
                if (installedMiners.includes(miner)) {
                    html += ' <a class="btn btn-warning btn-sm" onclick="startInstall()" href="javascript:void(0)">Re-install</a>';

                } else {
                    html += ' <a class="btn btn-primary btn-sm" onclick="startInstall()" href="javascript:void(0)">Install</a>';
                }
            }
        }

        return html;
    })()}

    <br />

    ${(() => {
        let html = '';

        if (uninstallStatus) {
            html += 'Uninstallation in progress...';
            html += ' <a class="btn btn-danger btn-sm" href="miner-uninstall?miner=${miner}">Stop uninstall</a>';
            html += ' <a class="btn btn-primary btn-sm" href="miner-uninstall?miner=${miner}&action=log">Show logs</a>';

        } else {
            html += 'No running uninstallation.';
        }

        return html;
    })()}
</form>


<script>
function startInstall() {
    alertify.confirm("<b>Miner installation - confirmation</b>", "Do you want to install the miner '<b>${miner}</b>' ?",
        function(){
            alertify.success('Starting ${miner} installation...');

            document.getElementById('action').value = 'start';
            document.getElementById('form-install').submit();
        },
        function(){
            //alertify.error('Cancel');
        }
    );
}

function stopInstall() {
    alertify.confirm("<b>Miner installation stopping - confirmation</b>", "Do you want to stop the installation of the miner '<b>${miner}</b>' ?",
        function(){
            alertify.success('Stopping ${miner} installation...');

            document.getElementById('action').value = 'stop';
            document.getElementById('form-install').submit();
        },
        function(){
            //alertify.error('Cancel');
        }
    );
}
</script>

